<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fresh Systems — Питьевая вода в вашем доме</title>
  <meta name="color-scheme" content="dark" />
  <!-- ускоряем первый кадр -->
  <link rel="preload" as="image" href="images/hero-water.jpg" />
  <link rel="preload" as="video" href="images/water-bg.mp4" type="video/mp4" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="no-video">

  <!-- Видео-фон на весь сайт -->
  <video id="bgVideo" class="bg-video" autoplay muted loop playsinline preload="auto" poster="images/hero-water.jpg">
    <source src="images/water-bg.mp4" type="video/mp4" />
  </video>
  <div class="overlay"></div>

  <!-- Хедер -->
  <header class="site-header">
    <a class="brand" href="index.html" aria-label="На главную">FS</a>
    <nav class="top-nav" aria-label="Основное меню">
      <a href="technologies.html">Технологии</a>
      <a href="sanpin.html">СанПиН</a>
      <a href="taste.html">Почему вода вкусная</a>
      <a href="services.html">Услуги</a>
      <a href="contacts.html">Контакты</a>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container hero-inner">
      <h1 class="hero-title" data-parallax data-speed="0.25">
        <span class="shine">Питьевая вода в вашем доме</span>
      </h1>
      <p class="hero-sub" data-parallax data-speed="0.18">
        Уникальные фильтросистемы под ваш дом — исследуем воду, проектируем систему и создаём чистую,
        безопасную и вкусную воду каждый день.
      </p>
      <div class="hero-actions" data-parallax data-speed="0.12">
        <a href="technologies.html" class="btn primary">Подробнее</a>
        <a href="contacts.html" class="btn ghost">Оставить заявку</a>
      </div>
    </div>
  </section>

  <!-- КТО МЫ ТАКИЕ -->
  <section class="section fadein parallaxy card-section" data-speed="-0.06" id="about-brief">
    <div class="container section-narrow">
      <h2>Кто мы такие?</h2>
      <p>
        <strong>FS engineering</strong> — компания по созданию централизованных систем фильтрации в жилых домах.
        Проектируем под анализ воды, монтируем, вводим в эксплуатацию и ведём сервис.
      </p>
      <!-- заменишь на <img src="images/about-moscow.jpg" alt="Новая московская застройка" class="about-photo"> -->
      <div class="about-photo-placeholder">Здесь будет фото новостройки (добавим позже)</div>
    </div>
  </section>

  <!-- НАШИ СИСТЕМЫ -->
  <section class="section fadein parallaxy card-section dark" data-speed="0.08" id="systems-types">
    <div class="container section-narrow">
      <h2>Наши системы</h2>
      <p>Разрабатываем и создаём решения под разные задачи и объекты.</p>
      <div class="sys-buttons">
        <a href="services.html#multi" class="btn pill">Многоквартирные дома</a>
        <a href="services.html#private" class="btn pill">Частные дома</a>
        <a href="services.html#apartment" class="btn pill">Квартиры</a>
      </div>
    </div>
  </section>

  <!-- ПОЧЕМУ ДОВЕРЯТЬ -->
  <section class="section fadein parallaxy card-section" data-speed="-0.05" id="trust">
    <div class="container grid-2">
      <div class="card glass">
        <h3>Инженерная экспертиза</h3>
        <p>Технологии разрабатываются командой инженеров с учётом гидравлики, ресурсных расчётов и санитарных норм.</p>
      </div>
      <div class="card glass">
        <h3>Качество воды</h3>
        <p>По результатам независимых лабораторий — вода чище, чем у части бутилированных брендов.</p>
      </div>
    </div>
  </section>

  <!-- СВЯЗАТЬСЯ С НАМИ -->
  <section class="section fadein parallaxy card-section dark" data-speed="0.06" id="contact-brief">
    <div class="container section-narrow center">
      <h2>Связаться с нами</h2>
      <p>
        Офис: г.&nbsp;Москва, ул.&nbsp;Красота. Рабочие часы: 00:00–00:00.
        <br>Нажмите «Оставить заявку», чтобы заполнить форму и отправить нам письмо.
      </p>
      <div class="hero-actions">
        <a href="contacts.html" class="btn primary">Оставить заявку</a>
        <a href="services.html" class="btn ghost">Наши услуги</a>
      </div>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="minor">© 2025 Fresh Systems</div>
      <a href="index.html" class="minor">Главная</a>
    </div>
  </footer>

  <!-- ==== JS: видео-фон, reveal, параллакс ==== -->
  <script>
    // 1) ВИДЕО-ФОН — надёжная инициализация с fallback
    (function(){
      const v = document.getElementById('bgVideo');
      if(!v) return;
      const markReady = () => {
        document.body.classList.remove('no-video');
        const p = v.play?.(); if (p?.catch) p.catch(()=>{});
      };
      v.addEventListener('loadeddata', markReady, { once:true });
      v.addEventListener('canplay',     markReady, { once:true });
      // Подстраховка по таймеру (если события не пришли)
      setTimeout(()=>{ if (v.readyState >= 2) markReady(); }, 2500);
    })();

    // 2) REVEAL — повторяемая анимация появления секций
    (function(){
      const reveals = document.querySelectorAll('.fadein');
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if (e.isIntersecting) e.target.classList.add('show');
          else e.target.classList.remove('show');
        });
      },{ threshold:.2 });
      reveals.forEach(r=>obs.observe(r));
    })();

    // 3) ЛЁГКИЙ ПАРАЛЛАКС (герой и секции «дышат» при скролле)
    (function(){
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const els = [
        ...document.querySelectorAll('[data-parallax]'),
        ...document.querySelectorAll('.parallaxy')
      ];
      if (!els.length) return;

      const clamp = (v,min,max)=>Math.min(max,Math.max(min,v));
      let H = innerHeight, ticking = false;

      const apply = () => {
        els.forEach(el=>{
          const sp = parseFloat(el.dataset.speed || '0.1');
          const r  = el.getBoundingClientRect();
          const c  = r.top + r.height/2 - H/2;
          const move = clamp(c*sp, -42, 42);
          el.style.transform = `translate3d(0, ${move}px, 0)`;
        });
        ticking = false;
      };
      addEventListener('scroll', ()=>{ if(!ticking){ ticking=true; requestAnimationFrame(apply);} }, { passive:true });
      addEventListener('resize', ()=>{ H = innerHeight; apply(); }, { passive:true });
      apply();
    })();
  </script>
</body>
</html>
