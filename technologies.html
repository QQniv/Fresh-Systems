<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ ‚Äî Fresh Systems</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap&subset=cyrillic" rel="stylesheet">
<link rel="stylesheet" href="styles.css" />

<style>
:root{
  --ink:#eaf6ff; --muted:#bcd2e7; --panel:rgba(255,255,255,.06); --panel-br:rgba(255,255,255,.12);
}
.page-tech{position:relative; z-index:1; padding-top:84px}
.container{max-width:1200px; margin:0 auto; padding:0 20px}

.h1{font-weight:900; font-size:clamp(32px,6vw,60px); line-height:1.05; color:var(--ink); margin:0 0 10px}
.lead{color:var(--muted); font-size:clamp(14px,2.4vw,18px); margin:0 0 24px}

.pipe-scene{position:relative; min-height:2720px}
@media (max-width:900px){ .pipe-scene{min-height:3120px} }
@media (max-width:560px){ .pipe-scene{min-height:3420px} }

#pipeSVG{position:absolute; inset:0; width:100%; height:100%; display:block}

/* ‚Äî‚Äî —Ç—Ä—É–±–∞ (—Å—Ç–µ–∫–ª–æ/–º–µ—Ç–∞–ª–ª + —Å–≤–µ—Ç –ø–æ—Ç–æ–∫–∞) ‚Äî‚Äî */
.pipe-shadow{stroke:rgba(0,0,0,.45); stroke-width:40; fill:none; stroke-linejoin:round; stroke-linecap:round; filter:url(#shadowSoft); opacity:.45}
.pipe-glass {stroke:url(#glassStroke); stroke-width:36; fill:none; stroke-linejoin:round; stroke-linecap:round; filter:url(#specLight)}
.pipe-inner {stroke:url(#coreGrad);   stroke-width:22; fill:none; stroke-linejoin:round; stroke-linecap:round; filter:drop-shadow(0 0 12px rgba(116,210,255,.55))}
.pipe-glow  {stroke:rgba(175,245,255,.95); stroke-width:8; fill:none; stroke-linecap:round; stroke-dasharray:0 24 10 120; animation:flow 2.6s linear infinite; filter:drop-shadow(0 0 8px rgba(125,230,255,.95))}
@keyframes flow{to{stroke-dashoffset:-180}}

/* ‚Äî –∫–∞–ø–ª—è ‚Äî –∑–∞–º–µ—Ç–Ω–∞—è –∏ –≤–Ω—É—Ç—Ä–∏ –º–∞—Å–∫–∏ ‚Äî */
.drop{filter:drop-shadow(0 0 18px rgba(116,210,255,1))}
.drop .aura{fill:rgba(115,220,255,.42); transform-origin:center; animation:pulse 1.6s ease-in-out infinite}
.drop .body{fill:url(#dropGrad); stroke:#e6fbff; stroke-width:1.6}
.drop .glint{fill:#fff; opacity:.95}
@keyframes pulse{0%,100%{transform:scale(.92); opacity:.6}50%{transform:scale(1.08); opacity:1}}

/* –º–æ–¥—É–ª–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
.module rect{fill:rgba(9,14,22,.9); stroke:rgba(170,215,255,.6); stroke-width:2; rx:12; ry:12; filter:drop-shadow(0 8px 20px rgba(0,0,0,.35))}
.module .icon{stroke:rgba(214,238,255,.96); stroke-width:2.5; fill:none; stroke-linecap:round; stroke-linejoin:round}

.note{position:absolute; width:min(440px,42vw); background:var(--panel); border:1px solid var(--panel-br); border-radius:16px; padding:14px 16px; backdrop-filter:blur(10px); box-shadow:0 12px 34px rgba(0,0,0,.28)}
.note .tag{display:inline-flex; gap:8px; align-items:center; padding:4px 10px; border-radius:999px; border:1px solid rgba(125,211,252,.35); background:rgba(125,211,252,.14); color:#dff6ff; font-weight:700; margin-bottom:6px}
.note h3{margin:6px 0 8px; font-size:18px; color:var(--ink)}
.note p{margin:0; color:#d7e7f4; line-height:1.55; font-size:15px}
.reveal{opacity:0; transform:translateY(18px); transition:.55s ease}
.reveal.show{opacity:1; transform:none}

@media (max-width:820px){ .note{width:calc(100% - 40px); left:20px !important} }
</style>
</head>
<body>
<video class="bg-video" autoplay muted loop playsinline poster="images/hero-water.jpg">
  <source src="images/water-bg.mp4" type="video/mp4" />
</video>
<div class="overlay"></div>

<header class="site-header">
  <a class="brand" href="index.html" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é">FS</a>
  <nav class="top-nav" aria-label="–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é">
    <a href="technologies.html" class="active">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</a>
    <a href="sanpin.html">–°–∞–Ω–ü–∏–ù</a>
    <a href="taste.html">–ü–æ—á–µ–º—É –≤–æ–¥–∞ –≤–∫—É—Å–Ω–∞—è</a>
    <a href="services.html">–£—Å–ª—É–≥–∏</a>
    <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
  </nav>
  <button class="menu-toggle" id="menuBtn" aria-label="–ú–µ–Ω—é" aria-expanded="false"><span></span></button>
</header>
<nav class="mobile-drawer" id="drawer" hidden aria-label="–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é">
  <a href="technologies.html" class="active">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</a>
  <a href="sanpin.html">–°–∞–Ω–ü–∏–ù</a>
  <a href="taste.html">–ü–æ—á–µ–º—É –≤–æ–¥–∞ –≤–∫—É—Å–Ω–∞—è</a>
  <a href="services.html">–£—Å–ª—É–≥–∏</a>
  <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</nav>

<main class="page-tech container">
  <h1 class="h1">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h1>
  <p class="lead">–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏. –°–∫—Ä–æ–ª–ª—å ‚Äî –∏ —Å–≤–µ—Ç—è—â–∞—è—Å—è –∫–∞–ø–ª—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ —Å—Ç–∞–¥–∏–∏ —Å—Ç—Ä–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ç—Ä—É–±—ã.</p>

  <section class="pipe-scene">
    <svg id="pipeSVG" viewBox="0 0 1200 2720" preserveAspectRatio="none">
      <defs>
        <linearGradient id="glassStroke" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%"  stop-color="rgba(240,248,255,.75)"/>
          <stop offset="45%" stop-color="rgba(170,205,235,.40)"/>
          <stop offset="100%" stop-color="rgba(40,60,80,.38)"/>
        </linearGradient>
        <linearGradient id="coreGrad" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%"   stop-color="rgba(230,255,255,.98)"/>
          <stop offset="65%"  stop-color="rgba(116,210,255,.78)"/>
          <stop offset="100%" stop-color="rgba(116,210,255,.46)"/>
        </linearGradient>
        <radialGradient id="dropGrad" cx="50%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#ffffff"/>
          <stop offset="55%" stop-color="#eaffff"/>
          <stop offset="100%" stop-color="#7dd3fc"/>
        </radialGradient>

        <filter id="shadowSoft" x="-30%" y="-30%" width="160%" height="160%"><feGaussianBlur stdDeviation="3"/></filter>
        <filter id="specLight" x="-20%" y="-20%" width="140%" height="140%">
          <feSpecularLighting surfaceScale="2.5" specularConstant="0.65" specularExponent="18" lighting-color="#e6f7ff">
            <fePointLight x="-80" y="-120" z="80"/>
          </feSpecularLighting>
          <feComposite operator="in" in2="SourceGraphic"/>
        </filter>

        <!-- –í–ê–ñ–ù–û: –º–∞—Å–∫–∞ —à–∏—Ä–µ, —á–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ç—Ä—É–±–∞, —á—Ç–æ–±—ã –∫–∞–ø–ª—é –Ω–µ ¬´–æ–±—Ä–µ–∑–∞–ª–æ¬ª -->
        <mask id="tubeMask">
          <rect x="0" y="0" width="1200" height="2720" fill="black"/>
          <path id="tubeCoreMask" d="" stroke="white" stroke-width="28" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </mask>
      </defs>

      <path id="tubeShadow" class="pipe-shadow" d=""/>
      <path id="tubeGlass"  class="pipe-glass"  d=""/>
      <path id="tubeInner"  class="pipe-inner"  d=""/>
      <path id="tubeGlow"   class="pipe-glow"   d="" mask="url(#tubeMask)"/>

      <g id="modules"></g>

      <!-- –ö–∞–ø–ª—è: —É–≤–µ–ª–∏—á–∏–ª –¥–æ 16√ó22 –∏ –¥–æ–±–∞–≤–∏–ª ¬´–∞—É—Ä—É¬ª -->
      <g id="drop" class="drop" transform="translate(0,0)" mask="url(#tubeMask)">
        <ellipse class="aura" cx="0" cy="0" rx="24" ry="30"/>
        <ellipse class="body" cx="0" cy="0" rx="16" ry="22"/>
        <circle class="glint" cx="3" cy="-9" r="3.8"/>
      </g>
    </svg>

    <div id="notes"></div>
  </section>
</main>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="minor">¬© 2025 Fresh Systems</div>
    <a href="index.html" class="minor">–ì–ª–∞–≤–Ω–∞—è</a>
  </div>
</footer>

<script>
/* –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
(()=>{const b=document.getElementById('menuBtn'),d=document.getElementById('drawer');if(!b||!d)return;
const t=o=>{if(o===undefined)o=!d.classList.contains('open');d.classList.toggle('open',o);d.hidden=!o;b.setAttribute('aria-expanded',String(o));document.body.classList.toggle('mobile-menu-open',o)};
const h=e=>{e.preventDefault();t()};b.addEventListener('click',h,{passive:false});b.addEventListener('touchstart',h,{passive:false});
document.addEventListener('click',e=>{if(!d.classList.contains('open'))return;if(!d.contains(e.target)&&!b.contains(e.target))t(false);});})();

/* —É–∑–ª—ã */
const STAGES=[
  {id:'hvs',tag:'–•–í–°', title:'–í–≤–æ–¥ –•–í–°', text:'–ò—Å—Ö–æ–¥–Ω–∞—è –≤–æ–¥–∞ –Ω–∞ –≤—Ö–æ–¥–µ.'},
  {id:'f1', tag:'F1',  title:'–ì—Ä—É–±–∞—è –æ—á–∏—Å—Ç–∫–∞ 100 Œºm', text:'–ü–µ—Å–æ–∫, —Ä–∂–∞–≤—á–∏–Ω–∞, –æ–∫–∞–ª–∏–Ω–∞. –ü—Ä–æ–º—ã–≤–Ω–æ–π —É–∑–µ–ª.', icon:'grid'},
  {id:'f2', tag:'F2',  title:'–¢–æ–Ω–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ 5 Œºm',   text:'–ö–∞—Ä—Ç—Ä–∏–¥–∂ PP melt-blown.', icon:'cartridge'},
  {id:'f3', tag:'F3',  title:'–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä',       text:'–ê–¥—Å–æ—Ä–±—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∫–∏ –∏ –∑–∞–ø–∞—Ö–æ–≤.', icon:'carbon'},
  {id:'hd', tag:'HD',  title:'–ù–∞—Å–æ—Å –≤—ã—Å–æ–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è', text:'–î–∞—ë—Ç –Ω–∞–ø–æ—Ä –Ω–∞ NF.', icon:'pump'},
  {id:'as', tag:'AS',  title:'–ê–Ω—Ç–∏—Å–∏–ª–∞–Ω—Ç (–æ–ø—Ü.)',     text:'–ó–∞—â–∏—Ç–∞ –º–µ–º–±—Ä–∞–Ω –æ—Ç –æ—Ç–ª–æ–∂–µ–Ω–∏–π.', icon:'dose'},
  {id:'nf', tag:'NF',  title:'–ù–∞–Ω–æ—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è',        text:'–ü–µ—Ä–º–µ–∞—Ç ‚Üí –¥–∞–ª–µ–µ; –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç ‚Üí –¥—Ä–µ–Ω–∞–∂.', icon:'membrane'},
  {id:'min',tag:'MIN', title:'–ú–∏–Ω–µ—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä Ca/Mg',   text:'–§–æ—Ä–º–∏—Ä—É–µ—Ç –≤–∫—É—Å, —Ü–µ–ª–µ–≤–æ–π TDS.', icon:'min'},
  {id:'uv', tag:'UV',  title:'–£–§-–æ–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞–Ω–∏–µ',    text:'–§–∏–Ω–∏—à–Ω–∞—è –±–∏–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.', icon:'uv'},
  {id:'tap',tag:'üíß',  title:'–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å',           text:'–ö—Ä–∞–Ω ‚Üí —Å—Ç–∞–∫–∞–Ω —Å —á–∏—Å—Ç–æ–π –≤–æ–¥–æ–π.', icon:'tap', final:true}
];

function moduleIcon(kind){
  const box=`<rect x="-74" y="-26" width="148" height="52"/>`;
  switch(kind){
    case 'grid':      return `${box}<path class="icon" d="M-56 -14 h112 v28 h-112 z M-34 -14 v28 M34 -14 v28 M-56 0 h112"/>`;
    case 'cartridge': return `${box}<ellipse class="icon" cx="0" cy="0" rx="38" ry="16"/><path class="icon" d="M-38 0 h76"/>`;
    case 'carbon':    return `${box}<rect class="icon" x="-54" y="-10" width="108" height="20" rx="6"/><path class="icon" d="M-46 -12 h92 M-46 12 h92"/>`;
    case 'pump':      return `${box}<rect class="icon" x="-48" y="-12" width="44" height="24" rx="4"/><rect class="icon" x="4" y="-10" width="28" height="20" rx="3"/>`;
    case 'dose':      return `${box}<path class="icon" d="M-14 -18 v36 M14 -18 v36 M-24 0 h48"/>`;
    case 'membrane':  return `${box}<rect class="icon" x="-56" y="-12" width="112" height="24" rx="6"/><rect class="icon" x="-46" y="-8" width="92" height="16" rx="4"/>`;
    case 'min':       return `${box}<rect class="icon" x="-30" y="-20" width="60" height="40" rx="6"/><rect class="icon" x="-12" y="-6" width="24" height="18" rx="3"/>`;
    case 'uv':        return `${box}<path class="icon" d="M-48 0 h96 M-26 -10 h52 M-26 10 h52"/>`;
    case 'tap':       return `${box}<path class="icon" d="M-28 0 h56 M18 0 v16 M0 18 v-8"/>`;
    default:          return `${box}<path class="icon" d="M-20 -12 h40 v24 h-40 z"/>`;
  }
}

const svg=document.getElementById('pipeSVG');
const pShadow=document.getElementById('tubeShadow');
const pGlass =document.getElementById('tubeGlass');
const pInner =document.getElementById('tubeInner');
const pGlow  =document.getElementById('tubeGlow');
const maskCore=document.getElementById('tubeCoreMask');
const mods=document.getElementById('modules');
const notes=document.getElementById('notes');
const drop=document.getElementById('drop');
let coreLen=0;

function buildPath(){
  const VBW=1200, VBH=2720, padX=120, padY=150;
  const L=padX, R=VBW-padX, M=VBW/2;
  const rows=STAGES.length, stepY=(VBH-padY*2)/(rows+.3);

  let d=`M ${M} ${padY} V ${padY+stepY*.4}`;
  for(let i=0;i<rows;i++){
    const toR=i%2===0, x=toR?R:L;
    d+=` H ${x}`;
    if(i<rows-1){ const ny=padY+stepY*(i+1.4); d+=` V ${ny} H ${toR?L:R}`; }
  }
  d+=` V ${VBH-padY}`;

  [pShadow,pGlass,pInner,pGlow,maskCore].forEach(p=>p.setAttribute('d',d));
  coreLen=pInner.getTotalLength();

  mods.innerHTML=''; notes.innerHTML='';
  for(let i=0;i<rows;i++){
    const a=coreLen*(i/rows), b=coreLen*((i+1)/rows), m=(a+b)/2, pt=pInner.getPointAtLength(m);
    const g=document.createElementNS('http://www.w3.org/2000/svg','g');
    g.setAttribute('class','module'); g.setAttribute('transform',`translate(${pt.x},${pt.y})`);
    g.innerHTML=moduleIcon(STAGES[i].icon); mods.appendChild(g);

    const card=document.createElement('div'); card.className='note reveal';
    card.innerHTML=`<div class="tag">${STAGES[i].tag}${STAGES[i].id==='as'?' ¬∑ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ':''}</div><h3>${STAGES[i].title}</h3><p>${STAGES[i].text}</p>`;
    notes.appendChild(card);

    const top=svg.getBoundingClientRect().top+window.scrollY;
    card.style.top=(top+pt.y-72)+'px';
    if(innerWidth>820){ const w=Math.min(440,innerWidth-40); card.style.left=(i%2===0?(innerWidth-w-20):20)+'px'; }
  }

  moveDrop(0);
}

function moveDrop(progress){
  const L=Math.max(0,Math.min(1,progress))*coreLen;
  const pt=pInner.getPointAtLength(L||.0001);
  drop.setAttribute('transform',`translate(${pt.x},${pt.y})`);
}

function onScroll(){
  const scene=document.querySelector('.pipe-scene');
  const r=scene.getBoundingClientRect(), vh=innerHeight;
  const total=r.height+vh, p=Math.min(total,Math.max(0,vh-r.top))/total;
  moveDrop(p);
  document.querySelectorAll('.note').forEach(n=>{ if(n.getBoundingClientRect().top<vh*.8) n.classList.add('show'); });
}

buildPath(); onScroll();
addEventListener('scroll',onScroll,{passive:true});
addEventListener('resize',()=>{ buildPath(); onScroll(); });
</script>
</body>
</html>
