<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ ‚Äî Fresh Systems</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap&subset=cyrillic" rel="stylesheet">
<link rel="stylesheet" href="styles.css" />

<style>
:root{
  --ink:#eaf6ff; --muted:#bcd2e7; --cyan:#7dd3fc;
  --panel:rgba(255,255,255,.06); --panel-br:rgba(255,255,255,.12);
}
.page-tech{position:relative; z-index:1; padding-top:84px}
.container{max-width:1200px; margin:0 auto; padding:0 20px}

.h1{font-weight:900; font-size:clamp(32px,6vw,60px); line-height:1.05; letter-spacing:.2px; color:var(--ink); margin:0 0 8px}
.lead{color:var(--muted); font-size:clamp(14px,2.4vw,18px); margin:0 0 24px}

.pipe-scene{position:relative; min-height:2600px}
@media (max-width:900px){ .pipe-scene{min-height:3000px} }
@media (max-width:560px){ .pipe-scene{min-height:3300px} }

#pipeSVG{position:absolute; inset:0; width:100%; height:100%; display:block}
.pipe-outer{stroke:rgba(210,240,255,.18); stroke-width:34; fill:none; stroke-linejoin:round; stroke-linecap:round;
  filter:drop-shadow(0 0 8px rgba(125,211,252,.35))}
.pipe-core{stroke:url(#coreGrad); stroke-width:20; fill:none; stroke-linejoin:round; stroke-linecap:round;
  filter:drop-shadow(0 0 10px rgba(116,210,255,.55))}
.flow{stroke:rgba(185,245,255,.95); stroke-width:7; fill:none; stroke-linecap:round; stroke-dasharray:0 24 8 120;
  animation:flow 2.8s linear infinite; opacity:.9; filter:drop-shadow(0 0 6px rgba(116,210,255,.9))}
@keyframes flow{to{stroke-dashoffset:-180}}

.drop{filter:drop-shadow(0 0 12px rgba(116,210,255,.9))}
.drop .b{fill:url(#dropGrad); stroke:#e6fbff; stroke-width:.9}
.drop-glint{fill:#fff; opacity:.9}

.module rect{fill:rgba(8,14,24,.86); stroke:rgba(140,200,255,.55); stroke-width:1.8; rx:12; ry:12}
.module .icon{stroke:rgba(214,238,255,.95); stroke-width:2.3; fill:none; stroke-linecap:round; stroke-linejoin:round}

.note{position:absolute; width:min(440px,42vw); background:var(--panel); border:1px solid var(--panel-br);
  border-radius:16px; padding:14px 16px; backdrop-filter:blur(8px); box-shadow:0 10px 30px rgba(0,0,0,.25)}
.note .tag{display:inline-flex; gap:8px; align-items:center; padding:4px 10px; border-radius:999px;
  border:1px solid rgba(125,211,252,.35); background:rgba(125,211,252,.15); color:#dff6ff; font-weight:700; margin-bottom:6px}
.note h3{margin:6px 0 8px; font-size:18px; color:var(--ink)}
.note p{margin:0; color:#d7e7f4; line-height:1.55; font-size:15px}

.reveal{opacity:0; transform:translateY(18px); transition:.55s ease}
.reveal.show{opacity:1; transform:none}

@media (max-width:820px){
  .note{width:calc(100% - 40px); left:20px !important}
}
</style>
</head>
<body>
<video class="bg-video" autoplay muted loop playsinline poster="images/hero-water.jpg">
  <source src="images/water-bg.mp4" type="video/mp4" />
</video>
<div class="overlay"></div>

<header class="site-header">
  <a class="brand" href="index.html" aria-label="–ù–∞ –≥–ª–∞–≤–Ω—É—é">FS</a>
  <nav class="top-nav" aria-label="–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é">
    <a href="technologies.html" class="active">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</a>
    <a href="sanpin.html">–°–∞–Ω–ü–∏–ù</a>
    <a href="taste.html">–ü–æ—á–µ–º—É –≤–æ–¥–∞ –≤–∫—É—Å–Ω–∞—è</a>
    <a href="services.html">–£—Å–ª—É–≥–∏</a>
    <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
  </nav>
  <button class="menu-toggle" id="menuBtn" aria-label="–ú–µ–Ω—é" aria-expanded="false"><span></span></button>
</header>
<nav class="mobile-drawer" id="drawer" hidden aria-label="–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é">
  <a href="technologies.html" class="active">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</a>
  <a href="sanpin.html">–°–∞–Ω–ü–∏–ù</a>
  <a href="taste.html">–ü–æ—á–µ–º—É –≤–æ–¥–∞ –≤–∫—É—Å–Ω–∞—è</a>
  <a href="services.html">–£—Å–ª—É–≥–∏</a>
  <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
</nav>

<main class="page-tech container">
  <h1 class="h1">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h1>
  <p class="lead">–í–æ—Ç –ø—Ä–∏–º–µ—Ä —Å—Ö–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –°–∫—Ä–æ–ª–ª—å ‚Äî –∏ —Å–≤–µ—Ç—è—â–∞—è—Å—è –∫–∞–ø–ª—è –ø—Ä–æ–π–¥—ë—Ç –≤–µ—Å—å –ø—É—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ç—Ä—É–±—ã.</p>

  <section class="pipe-scene">
    <svg id="pipeSVG" viewBox="0 0 1200 2600" preserveAspectRatio="none">
      <defs>
        <linearGradient id="coreGrad" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="rgba(230,255,255,.95)"/>
          <stop offset="70%" stop-color="rgba(116,210,255,.65)"/>
          <stop offset="100%" stop-color="rgba(116,210,255,.40)"/>
        </linearGradient>
        <radialGradient id="dropGrad" cx="50%" cy="35%" r="70%">
          <stop offset="0%" stop-color="#ffffff"/>
          <stop offset="60%" stop-color="#eaffff"/>
          <stop offset="100%" stop-color="#7dd3fc"/>
        </radialGradient>

        <mask id="tubeMask">
          <rect x="0" y="0" width="1200" height="2600" fill="black"/>
          <path id="tubeCoreMask" d="" stroke="white" stroke-width="22" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </mask>
      </defs>

      <path id="tubeOuter" class="pipe-outer" d=""/>
      <path id="tubeCore"  class="pipe-core"  d=""/>
      <path id="tubeFlow"  class="flow"      d="" mask="url(#tubeMask)"/>

      <g id="modules"></g>

      <g id="drop" class="drop" transform="translate(0,0)" mask="url(#tubeMask)">
        <ellipse class="b" cx="0" cy="0" rx="11" ry="15"/>
        <circle class="drop-glint" cx="2" cy="-6" r="3"/>
      </g>
    </svg>

    <div id="notes"></div>
  </section>
</main>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="minor">¬© 2025 Fresh Systems</div>
    <a href="index.html" class="minor">–ì–ª–∞–≤–Ω–∞—è</a>
  </div>
</footer>

<script>
/* ===== –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é ===== */
(function(){
  const btn=document.getElementById('menuBtn'), d=document.getElementById('drawer');
  if(!btn||!d) return;
  const t=o=>{ if(o===undefined) o=!d.classList.contains('open');
    d.classList.toggle('open',o); d.hidden=!o; btn.setAttribute('aria-expanded', String(o));
    document.body.classList.toggle('mobile-menu-open',o); };
  const h=e=>{e.preventDefault(); t();};
  btn.addEventListener('click',h,{passive:false}); btn.addEventListener('touchstart',h,{passive:false});
  document.addEventListener('click',e=>{ if(!d.classList.contains('open')) return;
    if(!d.contains(e.target)&&!btn.contains(e.target)) t(false);});
})();

/* ===== —É–∑–ª—ã ===== */
const STAGES = [
  {id:'hvs', tag:'–•–í–°',  title:'–í–≤–æ–¥ –•–í–°', text:'–ò—Å—Ö–æ–¥–Ω–∞—è –≤–æ–¥–∞ –Ω–∞ –≤—Ö–æ–¥–µ.'},
  {id:'f1',  tag:'F1',   title:'–ì—Ä—É–±–∞—è –æ—á–∏—Å—Ç–∫–∞ 100 Œºm', text:'–ü–µ—Å–æ–∫, —Ä–∂–∞–≤—á–∏–Ω–∞, –æ–∫–∞–ª–∏–Ω–∞. –ü—Ä–æ–º—ã–≤–Ω–æ–π.', icon:'grid'},
  {id:'f2',  tag:'F2',   title:'–¢–æ–Ω–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ 5 Œºm', text:'–ö–∞—Ä—Ç—Ä–∏–¥–∂ PP melt-blown.', icon:'cartridge'},
  {id:'f3',  tag:'F3',   title:'–£–≥–æ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä', text:'–ê–¥—Å–æ—Ä–±—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∫–∏ –∏ –∑–∞–ø–∞—Ö–æ–≤.', icon:'carbon'},
  {id:'hd',  tag:'HD',   title:'–ù–∞—Å–æ—Å –≤—ã—Å–æ–∫–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è', text:'–î–∞—ë—Ç –Ω–∞–ø–æ—Ä —É–∑–ª—É NF.', icon:'pump'},
  {id:'as',  tag:'AS',   title:'–ê–Ω—Ç–∏—Å–∏–ª–∞–Ω—Ç (–æ–ø—Ü.)', text:'–ó–∞—â–∏—Ç–∞ –º–µ–º–±—Ä–∞–Ω –æ—Ç –æ—Ç–ª–æ–∂–µ–Ω–∏–π.', icon:'dose'},
  {id:'nf',  tag:'NF',   title:'–ù–∞–Ω–æ—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è', text:'–ü–µ—Ä–º–µ–∞—Ç ‚Üí –¥–∞–ª–µ–µ; –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç ‚Üí –¥—Ä–µ–Ω–∞–∂.', icon:'membrane'},
  {id:'min', tag:'MIN',  title:'–ú–∏–Ω–µ—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä Ca/Mg', text:'–§–æ—Ä–º–∏—Ä—É–µ—Ç –≤–∫—É—Å, —Ü–µ–ª–µ–≤–æ–π TDS.', icon:'min'},
  {id:'uv',  tag:'UV',   title:'–£–§-–æ–±–µ–∑–∑–∞—Ä–∞–∂–∏–≤–∞–Ω–∏–µ', text:'–§–∏–Ω–∏—à–Ω–∞—è –±–∏–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.', icon:'uv'},
  {id:'tap', tag:'üíß',   title:'–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å', text:'–ö—Ä–∞–Ω ‚Üí —Å—Ç–∞–∫–∞–Ω —Å —á–∏—Å—Ç–æ–π –≤–æ–¥–æ–π.', icon:'tap', final:true}
];

const svg = document.getElementById('pipeSVG');
const outer = document.getElementById('tubeOuter');
const core  = document.getElementById('tubeCore');
const flow  = document.getElementById('tubeFlow');
const maskCore = document.getElementById('tubeCoreMask');
const mods  = document.getElementById('modules');
const notes = document.getElementById('notes');
const drop  = document.getElementById('drop');

let coreLen = 0;

/* —Å—Ç—Ä–æ–∏–º –æ–¥–Ω—É –¥–ª–∏–Ω–Ω—É—é ¬´–∑–º–µ–π–∫—É¬ª —Å –ø–æ–≤–æ—Ä–æ—Ç–∞–º–∏ 90¬∞ */
function buildPath(){
  const VBW=1200, VBH=2600;
  const padX = 120, padY = 140;
  const leftX  = padX;
  const rightX = VBW - padX;
  const midX   = VBW/2;

  const rows = STAGES.length;                     // –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö ¬´–ø–æ–ª–æ–∫¬ª
  const stepY = (VBH - padY*2) / (rows+0.3);      // –Ω–µ–º–Ω–æ–≥–æ –∑–∞–ø–∞—Å —Å–Ω–∏–∑—É
  let d = `M ${midX} ${padY} V ${padY + stepY*0.4}`; // —Å—Ç–∞—Ä—Ç –≤–Ω–∏–∑ –∫ –ø–µ—Ä–≤–æ–π –ø–æ–ª–∫–µ

  for(let i=0;i<rows;i++){
    const y = padY + stepY*(i+0.4);
    const toRight = i%2===0;
    const xTarget = toRight ? rightX : leftX;
    d += ` H ${xTarget}`;
    if(i<rows-1){
      const yNext = padY + stepY*(i+1.4);
      d += ` V ${yNext} H ${toRight ? leftX : rightX}`;
    }
  }
  d += ` V ${VBH - padY}`;

  outer.setAttribute('d', d);
  core.setAttribute('d', d);
  flow.setAttribute('d', d);
  maskCore.setAttribute('d', d);

  coreLen = core.getTotalLength();

  /* –ø–æ–∑–∏—Ü–∏–∏ –º–æ–¥—É–ª–µ–π –±–µ—Ä—ë–º –ø–æ –¥–ª–∏–Ω–µ –ø—É—Ç–∏: –¥–µ–ª–∏–º –ø—É—Ç—å –Ω–∞ —Ä–∞–≤–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã
     –∏ —Å—Ç–∞–≤–∏–º –º–æ–¥—É–ª—å –≤ —Å–µ—Ä–µ–¥–∏–Ω—É –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ ‚Äî —Ç–∞–∫ –æ–Ω–∏ –í–°–ï–ì–î–ê –Ω–∞ —Ç—Ä—É–±–µ */
  mods.innerHTML=''; notes.innerHTML='';
  for(let i=0;i<STAGES.length;i++){
    const segStart = coreLen * (i / STAGES.length);
    const segEnd   = coreLen * ((i+1) / STAGES.length);
    const mid      = (segStart + segEnd) / 2;
    const pt       = core.getPointAtLength(mid);

    // –º–æ–¥—É–ª—å –≤ SVG
    const g = document.createElementNS('http://www.w3.org/2000/svg','g');
    g.setAttribute('class','module');
    g.setAttribute('transform', `translate(${pt.x},${pt.y})`);
    g.innerHTML = moduleIcon(STAGES[i].icon);
    mods.appendChild(g);

    // –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–Ω–∞—Ä—É–∂–∏ (—Å–ø—Ä–∞–≤–∞/—Å–ª–µ–≤–∞ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫—Ä–∞—è)
    const toRight = (i%2===0);
    const card = document.createElement('div');
    card.className = 'note reveal';
    card.innerHTML = `
      <div class="tag">${STAGES[i].tag}${STAGES[i].id==='as'?' ¬∑ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ':''}</div>
      <h3>${STAGES[i].title}</h3>
      <p>${STAGES[i].text}</p>`;
    notes.appendChild(card);

    const sceneTop = svg.getBoundingClientRect().top + window.scrollY;
    card.style.top = (sceneTop + pt.y - 70) + 'px';
    if(window.innerWidth>820){
      const w = Math.min(440, window.innerWidth-40);
      card.style.left = toRight ? (window.innerWidth - w - 20) + 'px' : '20px';
    }
  }
}

/* –ø—Ä–æ—Å—Ç—ã–µ –∏–∫–æ–Ω–∫–∏ —É–∑–ª–æ–≤ */
function moduleIcon(kind){
  const box = `<rect x="-72" y="-24" width="144" height="48"/>`;
  switch(kind){
    case 'grid':      return `${box}<path class="icon" d="M-50 -14 h100 v28 h-100 z M-30 -14 v28 M30 -14 v28"/>`;
    case 'cartridge': return `${box}<ellipse class="icon" cx="0" cy="0" rx="36" ry="16"/>`;
    case 'carbon':    return `${box}<path class="icon" d="M-46 -8 h92 v16 h-92 z M-40 -12 h80 M-40 12 h80"/>`;
    case 'pump':      return `${box}<path class="icon" d="M-40 -10 h40 v20 h-40 z M6 -8 h20 v16 h-20 z"/>`;
    case 'dose':      return `${box}<path class="icon" d="M-12 -18 v36 M12 -18 v36 M-22 0 h44"/>`;
    case 'membrane':  return `${box}<path class="icon" d="M-50 -10 h100 v20 h-100 z M-40 -6 h80 v12 h-80 z"/>`;
    case 'min':       return `${box}<path class="icon" d="M-28 -18 h56 v36 h-56 z M-12 -6 h24 v18 h-24 z"/>`;
    case 'uv':        return `${box}<path class="icon" d="M-40 0 h80 M-22 -10 h44 M-22 10 h44"/>`;
    case 'tap':       return `${box}<path class="icon" d="M-24 0 h48 M16 0 v16 M0 18 v-8"/>`;
    default:          return `${box}<path class="icon" d="M-20 -12 h40 v24 h-40 z"/>`;
  }
}

/* –¥–≤–∏–∂–µ–Ω–∏–µ –∫–∞–ø–ª–∏ –ø–æ —Å–∫—Ä–æ–ª–ª—É (–≤–ø–µ—Ä—ë–¥/–Ω–∞–∑–∞–¥) */
function moveDrop(progress){ // 0..1
  const len = Math.max(0, Math.min(1, progress)) * coreLen;
  const pt = core.getPointAtLength(len || 0.0001);
  drop.setAttribute('transform', `translate(${pt.x},${pt.y})`);
}
function onScroll(){
  const scene = document.querySelector('.pipe-scene');
  const r = scene.getBoundingClientRect();
  const vh = window.innerHeight;
  const total = r.height + vh;
  const gone  = Math.min(total, Math.max(0, vh - r.top));
  moveDrop(gone / total);

  document.querySelectorAll('.note').forEach(n=>{
    const nr = n.getBoundingClientRect();
    if(nr.top < vh*0.8) n.classList.add('show');
  });
}

/* init */
buildPath();
moveDrop(0);
onScroll();
addEventListener('scroll', onScroll, {passive:true});
addEventListener('resize', ()=>{ buildPath(); onScroll(); });
</script>
</body>
</html>
